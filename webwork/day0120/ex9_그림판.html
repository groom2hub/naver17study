<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>502 study</title>
        <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Gaegu&family=Jua&family=Nanum+Pen+Script&family=Playwrite+AU+SA:wght@100..400&family=Single+Day&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
        <style>
            body * {
                font-family: 'Jua';
            }

            #can {
                border: 1px solid black;
                cursor: crosshair;
            }

            #mypen>div {
                width: 25px;
                height: 25px;
                border: 1px solid gray;
                border-radius: 100px;
                cursor: pointer;
                float: left;
                margin: 3px;
            }
        </style>
        <script>
            let ctx;
            $(function() {
                let draw = false;
                let can = document.getElementById("can");
                ctx = can.getContext("2d");
                let preX, preY;

                ctx.strokeStyle = 'black';
                ctx.lineWidth = 3;
                ctx.lineCap="round";

                $("#can").bind({
                    mousedown:function(e) {
                        draw = true;
                        preX = e.pageX;
                        preY = e.pageY-75;
                    },
                    mouseup:function(e) {
                        draw=false;
                    },
                    mousemove:function(e) {
                        if (draw) {
                            ctx.beginPath();
                            ctx.moveTo(preX, preY);
                            ctx.lineTo(e.pageX, e.pageY-75);
                            ctx.stroke();
                            ctx.closePath();

                            preX = e.pageX;
                            preY = e.pageY - 75;
                        }
                    }
                });

                $("#mypen>div").click(function() {
                    ctx.strokeStyle=$(this).css("background-color");
                });

            });
        </script>
    </head>

    <body>
        <h4 class="alert alert-danger">HTML5 의 Canvas 를 이용한 간단그림판</h4>
        <canvas id="can" width="500" height="500"></canvas>   
        <div id="mypen">
            <div style="background-color: orange;"></div>
            <div style="background-color: #ffb6c1;"></div>
            <div style="background-color: #90ee90;"></div>
            <div style="background-color: #00bfff;"></div>
            <div style="background-color: #228b22;"></div>
            <div style="background-color: #add8e6;"></div>
            <div style="background-color: #db7093;"></div>
            <div style="background-color: #fa8072;"></div>
            <div style="background-color: #afeeee;"></div>
            <div style="background-color: #9400d3;"></div>
            <div style="background-color: #ff7f50;"></div>
            <div style="background-color: #1e90ff;"></div>
            <div style="background-color: #7fffd4;"></div>
            <div style="background-color: #c71585;"></div>
            <div style="background-color: #40e0d0;"></div>
            <div style="background-color: #ff6347;"></div>
        </div> 

        <hr style="clear: both; width: 500px;">
        <button type="button" id="btn1">화면 초기화</button>
        <button type="button" id="btn2">지우개</button>
        <button type="button" id="btn3">별도 보관</button>
        <hr class="save">
        <script>
            $("#btn1").click(function() {
                ctx.clearRect(0, 0, 500, 500);
            });

            $("#btn2").click(function() {
                ctx.strokeStyle = "#fff";
            });

            $("#btn3").click(function() {
                let myimg = `<img src="${can.toDataURL()}">`;
                $("hr.save").after(myimg);
            });
        </script>
    </body>
</html>